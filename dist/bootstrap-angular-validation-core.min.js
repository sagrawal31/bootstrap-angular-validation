"use strict";angular.module("bootstrap.angular.validation",[]),angular.module("bootstrap.angular.validation").provider("bsValidationConfig",function(){function a(a){return angular.isString(b)?b===a:-1!==b.indexOf(a)}var b="blur",c="simple",d=this;this.global={},this.global.addSuccessClass=!0,this.global.errorClass="has-error",this.global.successClass="has-success",this.global.errorMessagePrefix="",this.global.tooltipPlacement="bottom-left",this.global.tooltipAppendToBody=!1,this.global.messages={required:"This field is required.",email:"Please enter a valid email address.",strictemail:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",digits:"Please enter only digits.",min:"Please enter a value greater than or equal to {{validValue}}.",max:"Please enter a value less than or equal to {{validValue}}.",length:"Please enter all {{validValue}} characters.",minlength:"Please enter at least {{validValue}} characters.",maxlength:"Please enter no more than {{validValue}} characters.",editable:"Please select a value from dropdown.",pattern:"Please fix the pattern.",equalto:"Please enter the same {{matchName}} again."},this.global.setValidateFieldsOn=function(a){if(!a)throw"Please provide an string or list of events to validate fields on";if(!angular.isString(a)&&!angular.isArray(a))throw"Event should either be a string or a list";b=a},this.global.setDisplayErrorsAs=function(a){if(!a)throw'Please provide the way validation error should be displayed. In-built options are "simple" & "tooltip".';c=a},this.$get=[function(){return{messages:d.global.messages,errorClass:d.global.errorClass,successClass:d.global.successClass,tooltipAppendToBody:d.global.tooltipAppendToBody,getDisplayErrorsAs:function(){return c},getErrorMessagePrefix:function(){return d.global.errorMessagePrefix||""},getTooltipPlacement:function(){return d.global.tooltipPlacement},shouldAddSuccessClass:function(){return d.global.addSuccessClass},shouldValidateOnBlur:function(){return a("blur")},shouldValidateOnSubmit:function(){return a("submit")},shouldValidateOnDisplay:function(){return a("display")}}}]}),angular.module("bootstrap.angular.validation").directive("form",["$parse","$rootScope","BsValidationService",function(a,b,c){return{restrict:"E",require:"form",priority:1e3,compile:function(b,d){b.attr("novalidate","novalidate"),c.addDirective(b);var e=b.find("[ng-include]");if(e.length>0){var f=a(e.attr("ng-include"))();c.addToNgIncludedURLs(f)}var g=d.ngSubmit;delete d.ngSubmit;var h=function(b,c,d,e){e.$showValidation=function(){e.$setSubmitted(),b.$broadcast("onBsValidationStateChange",{showValidationState:!0})},e.$hideValidation=function(){e.$setPristine(),b.$broadcast("onBsValidationStateChange",{showValidationState:!1})},c.on("submit",function(d){if(d.preventDefault(),e.$invalid)return c[0].querySelector(".ng-invalid").focus(),!1;var f=a(g);return b.$apply(function(){f(b,{$event:d}),e.$commitViewValue(),e.$setSubmitted(),e.$hideValidation()}),d.stopImmediatePropagation(),!1})};return{pre:h}}}}]),angular.module("bootstrap.angular.validation").directive("bsValidation",["$timeout","$injector","BsValidationService","bsValidationConfig",function(a,b,c,d){return{restrict:"A",require:["ngModel","?^^form"],link:function(a,b,e,f){function g(){c.addErrorClass(s)}function h(){c.removeSuccessClass(s)}function i(){g(),y.showErrorMessage(b,e,q,s)}function j(){y.hideErrorMessage(b,s)}function k(){return c.addSuccessClass(s),j()}function l(){k()}function m(){h()}function n(){return t?q.$valid?l():q.$invalid?i():void 0:(m(),j())}function o(){t=!0,n()}function p(){t=!1,n()}var q=f[0],r=f[1],s=c.getFormGroupElement(b);if(!s)throw"No parent form group element found for input element";var t=!1,u=d.shouldValidateOnBlur(),v=d.shouldValidateOnDisplay(),w=d.shouldValidateOnSubmit(),x=c.displayErrorPreference(b,e),y=c.getValidationMessageService(x);if(angular.forEach(c.getValidators(),function(d){var f=b.attr(d);(e[d]||angular.isDefined(f)&&f!==!1)&&c.addValidator(a,e,q,d)}),u)var z=a.$watch(function(){return q.$touched},function(a){a&&(t=!0,n(),z())});w&&r&&a.$watch(function(){return r.$submitted},function(a){t=a,n()}),v&&o(),a.$watch(function(){return q.$viewValue+q.$modelValue},n),a.$on("onBsValidationStateChange",function(a,b){t=b.showValidationState,n()}),a.$on("$destroy",function(){y.destroyMessage(b)}),q.$showValidation=o,q.$hideValidation=p}}}]),angular.module("bootstrap.angular.validation").factory("BsValidationService",["$interpolate","bsValidationConfig","$injector",function(a,b,c){var d="bsDisplayErrorAs",e="[bs-form-group]",f=".form-group",g=[],h={digits:function(a){return/^\d+$/.test(a)},equalto:function(a,b,c){return a+""==b.$eval(c.equalto)+""},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},min:function(a,b,c){return parseFloat(a)>=parseFloat(c.min)},max:function(a,b,c){return parseFloat(a)<=parseFloat(c.max)},length:function(a,b,c){return a.length===parseInt(c.length)},strictemail:function(a){return new RegExp(/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/).test(a)}},i=[],j=["input","select","textarea"];angular.forEach(j,function(a){i.push(a+"[ng-model]"),i.push(a+"[data-ng-model]")});var k=i.join(","),l=["matchName"];return{getValidators:function(){var a=["equalto","min","max","number","digits","length"],b=Object.keys(h);return a.concat(b)},getMetaInformation:function(a){var b={};return angular.forEach(l,function(c){b[c]=a.attr(c)||a.attr(c.camelCaseToDash())}),b},addDirective:function(a){var b=a.find(k);return b.attr("bs-validation",""),b},addErrorClass:function(a){this.removeErrorClass(a),a.addClass(b.errorClass)},addSuccessClass:function(a){this.removeErrorClass(a),b.shouldAddSuccessClass()&&a.addClass(b.successClass)},addToNgIncludedURLs:function(a){-1===g.indexOf(a)&&g.push(a)},addValidator:function(a,b,c,d){c.$validators[d]=function(e,f){var g=e||f;return c.$isEmpty(g)||h[d](g,a,b)}},checkNgIncludedURL:function(a){var b=g.indexOf(a);return b>-1?(g.splice(b,1),!0):!1},displayErrorPreference:function(a,c){var e=d;if(c[e])return c[e];var f=a.parents("form");return e=e.camelCaseToDash(),f&&f.attr(e)?f.attr(e):b.getDisplayErrorsAs()},getErrorMessage:function(a,c,d){var e=Object.keys(d.$error)[0];return b.getErrorMessagePrefix()+this.resolveMessage(a,c,e)},getFormGroupElement:function(a){var b=a.parents(f);return b&&0!==b.length||(b=a.parents(e),b&&0!==b.length)?b:null},getValidationMessageService:function(a){var b;try{b=c.get(a+"MessageService")}catch(d){throw"No message service found for type ["+a+"]."}if("tooltip"===a&&!c.has("$uibPosition"))throw"$uibPosition service required from the ui-bootstrap module in order to use the tooltip message.";return b},removeErrorClass:function(a){a.removeClass(b.errorClass)},removeSuccessClass:function(a){a.removeClass(b.successClass)},resolveMessage:function(c,d,e){var f=this.getMetaInformation(c),g=c.attr(e+"-notification")||b.messages[e],h=angular.extend({},{validValue:d[e]},f);return a(g)(h)}}}]),window.jQuery||(angular.element.prototype.find=function(a){return angular.element(this[0].querySelectorAll(a))}),window.jQuery||angular.element.prototype.parents||(angular.element.prototype.parents=function(a){for(var b=!!document.documentMode,c=this[0],d=[];c.parentNode.parentNode;)c=c.parentNode,a?b?c.msMatchesSelector(a)&&d.push(c):c.matches(a)&&d.push(c):d.push(c);return angular.element(d)}),String.prototype.camelCaseToDash||(String.prototype.camelCaseToDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})});