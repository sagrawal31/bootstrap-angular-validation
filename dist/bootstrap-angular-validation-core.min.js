"use strict";angular.module("bootstrap.angular.validation",[]),angular.module("bootstrap.angular.validation").provider("bsValidationConfig",function(){function a(a){return angular.isString(b)?b===a:-1!==b.indexOf(a)}var b="blur",c="simple",d=[],e=this;this.global={},this.global.addSuccessClass=!0,this.global.errorClass="has-error",this.global.successClass="has-success",this.global.errorMessagePrefix="",this.global.tooltipPlacement="bottom-left",this.global.tooltipAppendToBody=!1,this.global.messages={required:"This field is required.",email:"Please enter a valid email address.",strictemail:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",digits:"Please enter only digits.",min:"Please enter a value greater than or equal to {{validValue}}.",max:"Please enter a value less than or equal to {{validValue}}.",length:"Please enter all {{validValue}} characters.",minlength:"Please enter at least {{validValue}} characters.",maxlength:"Please enter no more than {{validValue}} characters.",editable:"Please select a value from dropdown.",pattern:"Please fix the pattern.",equalto:"Please enter the same {{matchName}} again."},this.global.setValidateFieldsOn=function(a){if(!a)throw"Please provide an string or list of events to validate fields on";if(!angular.isString(a)&&!angular.isArray(a))throw"Event should either be a string or a list";b=a},this.global.setDisplayErrorsAs=function(a){if(!a)throw'Please provide the way validation error should be displayed. In-built options are "simple" & "tooltip".';c=a},this.global.useMessageFilters=function(a){if(!a)throw"Please provide a string or list of filters to apply to messages";if(!angular.isString(a)&&!angular.isArray(a))throw"Filters should either be a string or a list";d=a,angular.isArray(d)||(d=[d])},this.$get=[function(){return{messages:e.global.messages,errorClass:e.global.errorClass,successClass:e.global.successClass,tooltipAppendToBody:e.global.tooltipAppendToBody,getDisplayErrorsAs:function(){return c},getErrorMessagePrefix:function(){return e.global.errorMessagePrefix||""},getMessageFilters:function(){return d},getTooltipPlacement:function(){return e.global.tooltipPlacement},shouldAddSuccessClass:function(){return e.global.addSuccessClass},shouldValidateOn:a}}]}),angular.module("bootstrap.angular.validation").directive("form",["$parse","BsValidationService",function(a,b){return{restrict:"E",require:"form",priority:1e3,compile:function(c,d){if(!b.isValidationDisabled(c)){c.attr("novalidate","novalidate");var e=d.ngSubmit;delete d.ngSubmit;var f=function(b,c,d,f){f.$showValidation=function(){f.$setSubmitted(),b.$broadcast("onBsValidationStateChange",{showValidationState:!0})},f.$hideValidation=function(){f.$setPristine(),b.$broadcast("onBsValidationStateChange",{showValidationState:!1})};var g=c[0].attributes.hasOwnProperty("bs-pristine-on-submit");c.on("submit",function(d){if(f.$invalid)return c[0].querySelector(".ng-invalid").focus(),!1;var h=a(e);return b.$apply(function(){h(b,{$event:d}),f.$commitViewValue(),f.$setSubmitted(),g&&f.$hideValidation()}),g&&(d.stopImmediatePropagation(),d.preventDefault()),!0})};return{pre:f}}}}}]),function(){var a=["bsValidationDirective","BsValidationService",function(a,b){return{restrict:"E",require:a[0].require,compile:function(c,d){return b.isValidationDisabled(c)||!d.hasOwnProperty("ngModel")||d.hasOwnProperty("bsValidation")?void 0:(c.attr("bs-validation",""),a[0].link)}}}];angular.module("bootstrap.angular.validation").directive("input",a).directive("select",a).directive("textarea",a)}(),angular.module("bootstrap.angular.validation").directive("bsValidation",["$timeout","$injector","BsValidationService",function(a,b,c){return{restrict:"A",require:["?ngModel","?^^form"],link:function(a,b,d,e){function f(){c.addErrorClass(r)}function g(){c.removeSuccessClass(r)}function h(){f(),x.showErrorMessage(b,d,p,r)}function i(){x.hideErrorMessage(b,r)}function j(){return c.addSuccessClass(r),i()}function k(){j()}function l(){g()}function m(){return c.toggleErrorKeyClasses(r,p.$error),s?p.$valid?k():p.$invalid?h():void 0:(l(),i())}function n(){s=!0,m()}function o(){s=!1,m()}if(!c.isValidationDisabled(b)){var p=e[0],q=e[1];if(!p)throw"ng-model directive is required for the bs-validation directive to work.";var r=c.getFormGroupElement(b);if(!r)throw"No parent form group element found for input element";var s=!1,t=c.shouldValidateOnBlur(b),u=c.shouldValidateOnDisplay(b),v=c.shouldValidateOnSubmit(b),w=c.displayErrorPreference(b,d),x=c.getValidationMessageService(w);if(angular.forEach(c.getValidators(),function(e){var f=e.name,g=b.attr(f);(d[f]||angular.isDefined(g)&&g!==!1)&&c.addValidator(a,b,d,p,e)}),t)var y=a.$watch(function(){return p.$touched},function(a){a&&(s=!0,m(),y())});v&&q&&a.$watch(function(){return q.$submitted},function(a){s=a,m()}),u&&n(),a.$watch(function(){return p.$error},m,!0),a.$on("onBsValidationStateChange",function(a,b){s=b.showValidationState,m()}),a.$on("$destroy",function(){x.destroyMessage(b)}),p.$showValidation=n,p.$hideValidation=o}}}}]),angular.module("bootstrap.angular.validation").factory("BsValidationService",["$interpolate","bsValidationConfig","$injector","$filter",function(a,b,c,d){function e(a,c){var d="bs-trigger";if(a.attr(d))return a.attr(d)===c;var e=a.parents("form");return e&&e.attr(d)?e.attr(d)===c:b.shouldValidateOn(c)}function f(a,b){var c=new RegExp("\\b"+b+".*\\b","g");return a[0].className=a[0].className.replace(c,"").replace(/\s\s+/g," "),a}var g="bsDisplayErrorAs",h="[bs-form-group]",i=".form-group",j=[{name:"digits",validateFn:function(a){return/^\d+$/.test(a)}},{name:"equalto",validateFn:function(a,b,c){return a+""==b.$eval(c.equalto)+""}},{name:"number",validateFn:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)}},{name:"min",validateFn:function(a,b,c){return parseFloat(a)>=parseFloat(c.min)}},{name:"max",validateFn:function(a,b,c){return parseFloat(a)<=parseFloat(c.max)}},{name:"length",validateFn:function(a,b,c){return a.length===parseInt(c.length)}},{name:"strictemail",validateFn:function(a){return new RegExp(/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/).test(a)}}],k=["matchName"];return{getValidators:function(){return j},getMetaInformation:function(a){var b={};return angular.forEach(k,function(c){b[c]=a.attr(c)||a.attr(c.camelCaseToDash())}),b},addErrorClass:function(a){this.removeSuccessClass(a),a.addClass(b.errorClass)},addSuccessClass:function(a){this.removeErrorClass(a),b.shouldAddSuccessClass()&&a.addClass(b.successClass)},addValidator:function(a,b,c,d,e){d.$validators[e.name]=function(b,f){var g=b||f;return d.$isEmpty(g)?!0:e.validateFn(g,a,c)}},addGenericValidator:function(a){j.push(a)},displayErrorPreference:function(a,c){var d=g;if(c[d])return c[d];var e=a.parents("form");return d=d.camelCaseToDash(),e&&e.attr(d)?e.attr(d):b.getDisplayErrorsAs()},getErrorMessage:function(a,c,d){var e=Object.keys(d.$error)[0];return b.getErrorMessagePrefix()+this.resolveMessage(a,c,e)},getFormGroupElement:function(a){var b=a.parents(h);return b&&0!==b.length||(b=a.parents(i),b&&0!==b.length)?b:null},getValidationMessageService:function(a){var b;try{b=c.get(a+"MessageService")}catch(d){throw"No message service found for type ["+a+"]."}if("tooltip"===a&&!c.has("$uibPosition"))throw"$uibPosition service required from the ui-bootstrap module in order to use the tooltip message.";return b},isValidationDisabled:function(a){var b="bs-no-validation";if(a[0].attributes.hasOwnProperty(b))return!0;var c=a.parents("form");return c[0]&&c[0].attributes.hasOwnProperty(b)},removeErrorClass:function(a){a.removeClass(b.errorClass)},removeSuccessClass:function(a){a.removeClass(b.successClass)},resolveMessage:function(c,e,f){var g=this.getMetaInformation(c),h=c.attr(f+"-notification-filter")||b.getMessageFilters(),i=c.attr(f+"-notification")||b.messages[f];if(i||(console.warn("No message found for the key ["+f+"]. Consider adding a global message or element specific message using attribute ["+f+'-notification="My custom message"]'),i="Please fix this field"),angular.isDefined(h)){angular.isArray(h)||(h=[h]);for(var j=0;j<h.length;j++)i=d(h[j])(i)}var k=angular.extend({},{validValue:e[f]},g);return a(i)(k)},shouldValidateOnBlur:function(a){return e(a,"blur")},shouldValidateOnDisplay:function(a){return e(a,"display")},shouldValidateOnSubmit:function(a){return e(a,"submit")},toggleErrorKeyClasses:function(a,b){f(a,"bs-has-error-"),angular.forEach(b,function(b,c){a.addClass("bs-has-error-"+c)})}}}]),window.jQuery||(angular.element.prototype.find=function(a){return angular.element(this[0].querySelectorAll(a))}),window.jQuery||angular.element.prototype.parents||(angular.element.prototype.parents=function(a){for(var b=!!document.documentMode,c=this[0],d=[];c.parentNode.parentNode;)c=c.parentNode,a?b?c.msMatchesSelector(a)&&d.push(c):c.matches(a)&&d.push(c):d.push(c);return angular.element(d)}),String.prototype.camelCaseToDash||(String.prototype.camelCaseToDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})});