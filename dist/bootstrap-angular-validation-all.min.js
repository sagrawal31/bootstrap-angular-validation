"use strict";angular.module("bootstrap.angular.validation",[]),angular.module("bootstrap.angular.validation").provider("bsValidationConfig",function(){function a(a){return angular.isString(b)?b===a:-1!==b.indexOf(a)}var b="blur",c="simple",d=this;this.global={},this.global.addSuccessClass=!0,this.global.errorClass="has-error",this.global.successClass="has-success",this.global.errorMessagePrefix="",this.global.tooltipPlacement="bottom-left",this.global.tooltipAppendToBody=!1,this.global.messages={required:"This field is required.",email:"Please enter a valid email address.",strictemail:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",digits:"Please enter only digits.",min:"Please enter a value greater than or equal to {{validValue}}.",max:"Please enter a value less than or equal to {{validValue}}.",length:"Please enter all {{validValue}} characters.",minlength:"Please enter at least {{validValue}} characters.",maxlength:"Please enter no more than {{validValue}} characters.",editable:"Please select a value from dropdown.",pattern:"Please fix the pattern.",equalto:"Please enter the same {{matchName}} again."},this.global.setValidateFieldsOn=function(a){if(!a)throw"Please provide an string or list of events to validate fields on";if(!angular.isString(a)&&!angular.isArray(a))throw"Event should either be a string or a list";b=a},this.global.setDisplayErrorsAs=function(a){if(!a)throw'Please provide the way validation error should be displayed. In-built options are "simple" & "tooltip".';c=a},this.$get=[function(){return{messages:d.global.messages,errorClass:d.global.errorClass,successClass:d.global.successClass,tooltipAppendToBody:d.global.tooltipAppendToBody,getDisplayErrorsAs:function(){return c},getErrorMessagePrefix:function(){return d.global.errorMessagePrefix||""},getTooltipPlacement:function(){return d.global.tooltipPlacement},shouldAddSuccessClass:function(){return d.global.addSuccessClass},shouldValidateOn:a}}]}),angular.module("bootstrap.angular.validation").directive("form",["$parse","BsValidationService",function(a,b){return{restrict:"E",require:"form",priority:1e3,compile:function(c,d){if(!b.isValidationDisabled(c)){c.attr("novalidate","novalidate");var e=d.ngSubmit;delete d.ngSubmit;var f=function(b,c,d,f){f.$showValidation=function(){f.$setSubmitted(),b.$broadcast("onBsValidationStateChange",{showValidationState:!0})},f.$hideValidation=function(){f.$setPristine(),b.$broadcast("onBsValidationStateChange",{showValidationState:!1})};var g=c[0].attributes.hasOwnProperty("bs-pristine-on-submit");c.on("submit",function(d){if(f.$invalid)return c[0].querySelector(".ng-invalid").focus(),!1;var h=a(e);return b.$apply(function(){h(b,{$event:d}),f.$commitViewValue(),f.$setSubmitted(),g&&f.$hideValidation()}),g&&(d.stopImmediatePropagation(),d.preventDefault()),!0})};return{pre:f}}}}}]),function(){var a=["bsValidationDirective","BsValidationService",function(a,b){return{restrict:"E",require:a[0].require,compile:function(c,d){return b.isValidationDisabled(c)||!d.hasOwnProperty("ngModel")||d.hasOwnProperty("bsValidation")?void 0:(c.attr("bs-validation",""),a[0].link)}}}];angular.module("bootstrap.angular.validation").directive("input",a).directive("select",a).directive("textarea",a)}(),angular.module("bootstrap.angular.validation").directive("bsValidation",["$timeout","$injector","BsValidationService",function(a,b,c){return{restrict:"A",require:["?ngModel","?^^form"],link:function(a,b,d,e){function f(){c.addErrorClass(r)}function g(){c.removeSuccessClass(r)}function h(){f(),x.showErrorMessage(b,d,p,r)}function i(){x.hideErrorMessage(b,r)}function j(){return c.addSuccessClass(r),i()}function k(){j()}function l(){g()}function m(){return s?p.$valid?k():p.$invalid?h():void 0:(l(),i())}function n(){s=!0,m()}function o(){s=!1,m()}if(!c.isValidationDisabled(b)){var p=e[0],q=e[1];if(!p)throw"ng-model directive is required for the bs-validation directive to work.";var r=c.getFormGroupElement(b);if(!r)throw"No parent form group element found for input element";var s=!1,t=c.shouldValidateOnBlur(b),u=c.shouldValidateOnDisplay(b),v=c.shouldValidateOnSubmit(b),w=c.displayErrorPreference(b,d),x=c.getValidationMessageService(w);if(angular.forEach(c.getValidators(),function(e){var f=b.attr(e);(d[e]||angular.isDefined(f)&&f!==!1)&&c.addValidator(a,d,p,e)}),t)var y=a.$watch(function(){return p.$touched},function(a){a&&(s=!0,m(),y())});v&&q&&a.$watch(function(){return q.$submitted},function(a){s=a,m()}),u&&n(),a.$watch(function(){return p.$error},m,!0),a.$on("onBsValidationStateChange",function(a,b){s=b.showValidationState,m()}),a.$on("$destroy",function(){x.destroyMessage(b)}),p.$showValidation=n,p.$hideValidation=o}}}}]),angular.module("bootstrap.angular.validation").factory("simpleMessageService",["BsValidationService",function(a){function b(a,b){var d=b.find(c);if(d&&d.length)return d;var e,f=b.find(".input-group");return e=f.length>0?f:a,e.after('<span class="help-block '+c.substring(1)+'"></span>'),b.find(c)}var c=".bs-invalid-msg";return{destroyMessage:function(){},hideErrorMessage:function(b,d){a.removeErrorClass(d),d.find(c).addClass("ng-hide")},showErrorMessage:function(c,d,e,f){var g=a.getErrorMessage(c,d,e),h=b(c,f);h.html(g).removeClass("ng-hide")}}}]),angular.module("bootstrap.angular.validation").factory("tooltipMessageService",["$injector","BsValidationService","$interpolate","$templateCache","bsValidationConfig",function(a,b,c,d,e){function f(a){var b=a.attr("id");return b?b:(b="bs-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),a.attr("id",b),b)}function g(a){var b="bs-error-"+f(a),g=document.getElementById(b);if(g)return angular.element(g);var h={errorClass:e.errorClass,tooltipID:b},i=d.get("bav/template/tooltip.html");return i=c(i)(h),e.tooltipAppendToBody?angular.element(document.body).append(i):a.after(i),angular.element(document.getElementById(b))}function h(a){var b="bs-tooltip-placement";if(a.attr(b))return a.attr(b);var c=a.parents("form");return c&&c.attr(b)?c.attr(b):e.getTooltipPlacement()}return{destroyMessage:function(a){e.tooltipAppendToBody&&g(a).remove()},hideErrorMessage:function(a,c){b.removeErrorClass(c),g(a).removeClass("in")},showErrorMessage:function(c,d,f){var i=b.getErrorMessage(c,d,f),j=g(c),k=h(c),l=e.tooltipAppendToBody;j.find(".tooltip-inner").html(i);var m=a.get("$uibPosition"),n=m.positionElements(c,j,k,l);j.css({top:n.top+"px",left:n.left+"px"}),j.addClass("in"),n.placement&&!j.hasClass(n.placement.split("-")[0])&&j.addClass(n.placement.split("-")[0]),m.positionArrow(j,n.placement)}}}]),angular.module("bootstrap.angular.validation").run(["$templateCache",function(a){a.put("bav/template/tooltip.html",'<div class="tooltip {{errorClass}}" id="{{tooltipID}}" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>')}]),angular.module("bootstrap.angular.validation").factory("BsValidationService",["$interpolate","bsValidationConfig","$injector",function(a,b,c){function d(a,c){var d="bs-trigger";if(a.attr(d))return a.attr(d)===c;var e=a.parents("form");return e&&e.attr(d)?e.attr(d)===c:b.shouldValidateOn(c)}var e="bsDisplayErrorAs",f="[bs-form-group]",g=".form-group",h={digits:function(a){return/^\d+$/.test(a)},equalto:function(a,b,c){return a+""==b.$eval(c.equalto)+""},number:function(a){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},min:function(a,b,c){return parseFloat(a)>=parseFloat(c.min)},max:function(a,b,c){return parseFloat(a)<=parseFloat(c.max)},length:function(a,b,c){return a.length===parseInt(c.length)},strictemail:function(a){return new RegExp(/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/).test(a)}},i=["matchName"];return{getValidators:function(){var a=["equalto","min","max","number","digits","length"],b=Object.keys(h);return a.concat(b)},getMetaInformation:function(a){var b={};return angular.forEach(i,function(c){b[c]=a.attr(c)||a.attr(c.camelCaseToDash())}),b},addErrorClass:function(a){this.removeSuccessClass(a),a.addClass(b.errorClass)},addSuccessClass:function(a){this.removeErrorClass(a),b.shouldAddSuccessClass()&&a.addClass(b.successClass)},addValidator:function(a,b,c,d){c.$validators[d]=function(e,f){var g=e||f;return c.$isEmpty(g)||h[d](g,a,b)}},displayErrorPreference:function(a,c){var d=e;if(c[d])return c[d];var f=a.parents("form");return d=d.camelCaseToDash(),f&&f.attr(d)?f.attr(d):b.getDisplayErrorsAs()},getErrorMessage:function(a,c,d){var e=Object.keys(d.$error)[0];return b.getErrorMessagePrefix()+this.resolveMessage(a,c,e)},getFormGroupElement:function(a){var b=a.parents(g);return b&&0!==b.length||(b=a.parents(f),b&&0!==b.length)?b:null},getValidationMessageService:function(a){var b;try{b=c.get(a+"MessageService")}catch(d){throw"No message service found for type ["+a+"]."}if("tooltip"===a&&!c.has("$uibPosition"))throw"$uibPosition service required from the ui-bootstrap module in order to use the tooltip message.";return b},isValidationDisabled:function(a){var b="bs-no-validation";if(a[0].attributes.hasOwnProperty(b))return!0;var c=a.parents("form");return c[0]&&c[0].attributes.hasOwnProperty(b)},removeErrorClass:function(a){a.removeClass(b.errorClass)},removeSuccessClass:function(a){a.removeClass(b.successClass)},resolveMessage:function(c,d,e){var f=this.getMetaInformation(c),g=c.attr(e+"-notification")||b.messages[e];g||(console.warn("No message found for the key ["+e+"]. Consider adding a global message or element specific message using attribute ["+e+'-notification="My custom message"]'),g="Please fix this field");var h=angular.extend({},{validValue:d[e]},f);return a(g)(h)},shouldValidateOnBlur:function(a){return d(a,"blur")},shouldValidateOnDisplay:function(a){return d(a,"display")},shouldValidateOnSubmit:function(a){return d(a,"submit")}}}]),window.jQuery||(angular.element.prototype.find=function(a){return angular.element(this[0].querySelectorAll(a))}),window.jQuery||angular.element.prototype.parents||(angular.element.prototype.parents=function(a){for(var b=!!document.documentMode,c=this[0],d=[];c.parentNode.parentNode;)c=c.parentNode,a?b?c.msMatchesSelector(a)&&d.push(c):c.matches(a)&&d.push(c):d.push(c);return angular.element(d)}),String.prototype.camelCaseToDash||(String.prototype.camelCaseToDash=function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})});